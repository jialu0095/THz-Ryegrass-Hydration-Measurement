#%%
import os
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

os.chdir('plant_expr_API')
#%%

def print_mean_I0(I_group, group_name, dB_group, dB_name, current_day):
    for i in range(0,current_day):
        I = I_group[i]
        dB = dB_group[i]
        zero_indices = np.where(I == 0)[0]
        I = np.delete(I, zero_indices)
        dB = np.delete(dB, zero_indices)
        I_0 = 10**(dB/10)*I
        I_0_mean = np.mean(I_0)
        print(f'{group_name} day {i+1} mean I_0: ', I_0_mean)

def cal_mean_I0(I_group, group_name, dB_group, dB_name, current_day):
    I_0_means = []
    for i in range(0,current_day):
        I = I_group[i]
        dB = dB_group[i]
        zero_indices = np.where(I == 0)[0]
        I = np.delete(I, zero_indices)
        dB = np.delete(dB, zero_indices)
        I_0 = 10**(dB/10)*I
        I_0_mean = np.mean(I_0)
        I_0_means.append(I_0_mean)
    return I_0_means



#%%
current_day = 13
# load THz data
I_One50_1 = [[] for _ in range(current_day)]
I_GA66_1 = [[] for _ in range(current_day)]

dB_One50_1 = [[] for _ in range(current_day)]
dB_GA66_1 = [[] for _ in range(current_day)]

for i in range(0,current_day):
    print(i)
    
    I_One50_1[i] = np.loadtxt('I_wet'+str(i+1)+'_One50_3.csv', delimiter=' ', comments='#')
    # I_GA66_1[i] = np.loadtxt('I_wet'+str(i+1)+'_GA66.csv', delimiter=' ', comments='#')
    dB_One50_1[i] = np.loadtxt('dB_wet'+str(i+1)+'_One50_3.csv', delimiter=' ', comments='#')
    # dB_GA66_1[i] = np.loadtxt('dB_wet'+str(i+1)+'_GA66.csv', delimiter=' ', comments='#')

I_GA66_1_I0 = cal_mean_I0(I_GA66_1, 'GA66-1', dB_GA66_1, 'GA66-1', current_day)
I_One50_1_I0 = cal_mean_I0(I_One50_1, 'One50-3', dB_One50_1, 'One50-3', current_day)

print(I_One50_1_I0)

# %%
